// info.js
// 该文件专门用于存放脚本的静态信息，如版本号、更新日志和使用说明。

var scriptInfo = {
    version: "18.2.0",

    changelog: `
 变更日志 (版本 v18.2.0 - 修复与增强版)

 一、关键修复与增强

此版本在 v18.0.0 的基础上，修复了若干严重BUG，并对核心功能进行了重构和增强，以提供更稳定、更强大的用户体验。

1.  [重构] 多批次工作流逻辑:
       废除了原有的 \`切换到下一批次\` 步骤，因为它会导致逻辑混乱且容易误用。
       引入了全新的 \`---批次分割线---\` 概念。用户现在可以在工作流编辑器中添加此分割线，用于清晰地区分第一批次和第二批次的操作流程。
       后台引擎会自动解析此分割线，并在批次间执行切换动作，无需用户在流程中手动干预，从根本上解决了流程执行错误的问题。

2.  [修复] 核心功能BUG:
       修复了当启用多批次处理时，由于后台脚本未能正确加载和访问“切换批次”坐标而导致的脚本崩溃问题。

3.  [修复] UI显示错误:
       修复了在“延迟设置”界面中，“跳转MT前延迟”的数值加载错误，导致其总是显示为另一个延迟项的值的问题。

 二、UI/UX 全面升级

1.  [重构] 整体布局: 界面已全面切换为“卡片式”布局，增强了视觉组织性和清晰度，所有功能模块均被包裹在独立的卡片中。

2.  [重构] 工作流模块 (\`工作流\` 页面):
       废除了旧的横向滑动步骤选择器。
       新增“工作流方案管理”系统，支持用户自定义和保存三套独立的工作流方案。
       提供了“编辑当前方案”功能，通过专用弹窗编辑器对工作流进行增、删、改。
       [新增] 在编辑器中新增 \`---批次分割线---\` 特殊步骤，用于定义不同批次的工作流。
       实现了工作流方案的持久化存储，关闭脚本后配置不会丢失。

 三、核心功能增强

1.  [新增] 多批次处理功能 (\`序号配置\` 页面):
       新增“第二批次 (可选)”配置区，允许用户输入第二批次的PS和MT序号。
       用户可通过开关 (\`启用第二批次处理\`) 决定是否执行后续批次任务。

2.  [重构] 工作流步骤调整:
       移除了 \`切换到下一批次\` 这一操作步骤。
       引入了 \`---批次分割线---\` 作为逻辑分隔符。它本身不执行任何操作，仅用于告诉引擎如何为两个批次分配不同的工作流程。

 四、后端与逻辑优化

1.  [重构] 任务执行引擎 (\`worker.js\`):
       后台任务执行逻辑已重构为“工作流驱动引擎”。
       引擎现在完全根据UI层面传入的、当前激活的工作流方案数组来执行任务，极大提高了灵活性和可扩展性。

2.  [优化] 多批次处理实现:
       执行引擎现在会智能解析工作流中的 \`---批次分割线---\`。它会自动在第一批次完成后、第二批次开始前执行切换文件夹的操作，使得整个流程更加健just自动化。
       处理参数的函数现在能够智能识别当前处理的批次，并调用对应的数据。

3.  [增强] 验证逻辑:
       \`validateAllInputs\`函数已更新，现在会根据“第二批次”开关的状态，对其相关的输入进行有效性验证。

4.  [增强] 数据持久化:
       \`configStorage\`现在用于存储三套自定义工作流方案及当前激活的方案索引。

 五、技术规范

1.  [合规] 所有新增及修改的代码均遵循 ES5 规范，确保在旧版Auto.js环境中的兼容性和稳定性。
`,

    userManual: `
 联动自动贴图 - 专业使用手册 (v18.2)

 欢迎使用！本手册将带您从入门到精通，充分利用脚本的全部功能。

 =================================
 ==   第一部分：快速入门指南    ==
 =================================

 对于新用户，只需四步即可开始：

 1.  【配置参数】: 在“主要参数”页面，填写您想修改的【宽高】或【XY坐标】，并务必打开右侧对应的【开关】。
 2.  【填写序号】: 在“序号配置”页面，填写【第一批次PS序号】和【第一批次MT序号】。
 3.  【选择流程】: 在“工作流”页面，保持默认的“方案一”即可。这是一个包含所有基础操作的标准流程。
 4.  【双击启动】: 回到主界面，快速【双击】“保存配置并启动任务”按钮，即可开始自动化处理。

 =================================
 ==   第二部分：功能详解        ==
 =================================

 --- 1. “主要参数”页面 ---
 这里是您定义“做什么”的地方。所有修改都必须打开右侧开关才会生效。

   - 【宽高/XY坐标/缩放】: 控制贴图最终的尺寸、位置和动画效果。
   - 【高级效果】:
     - 不透明度: 设置图层的最终不透明度。
     - 图层叠加模式: 设置图层的混合模式 (如: 滤色, 变暗)。
     - 淡入/淡出: 让不透明度随处理序号产生渐变效果。
     - 图层效果开关: 在流程最后追加一个固定的复杂效果（如高斯模糊）。

 --- 2. “序号配置”与“工作流”页面 ---
 这两个页面共同构成了本脚本的【核心引擎】，请继续阅读下一部分。

 --- 3. “系统设置”页面 ---
 这里是调整脚本性能和兼容性的地方，通常无需修改。
   - 【延迟设置】: 调整动作间隔，适配不同性能的设备。
   - 【坐标设置】: 校准点击位置，推荐使用“分辨率适配”一键生成。

 ==================================================
 ==   第三部分：核心引擎 - 多批次与工作流详解    ==
 ==================================================

 本脚本最强大的功能，在于可以处理【多个批次】（如多个文件夹），并为每个批次【定义不同的操作流程】。这完全通过“批次分割线”来实现。

 --- 什么是“批次分割线”？ ---

   它是一个特殊的【逻辑标记】，您可以在“工作流编辑器”中添加它。
   - 它【不执行】任何点击操作。
   - 它的唯一作用，就是像书本里的【书签】，将一个长的工作流切分成两部分：
     - 书签【之前】的流程，用于处理【第一批次】。
     - 书签【之后】的流程，用于处理【第二批次】。

   【重要】: 切换文件夹（批次）的动作，是由脚本在处理完第一批次后【全自动】完成的，您完全无需在工作流中添加任何“切换”步骤。

 --- 如何使用？（三个典型场景） ---

   【场景一：为不同批次设置不同流程】
   假设您想：
   - 第一批次: 制作基础贴图 (加载->输入参数->保存)。
   - 第二批次: 在第一批次的基础上，叠加一个“高斯模糊”特效。

   您的工作流配置应该是：
   [加载PS] -> [选择MT] -> [输入参数] -> [保存] -> [确认保存] -> 【---批次分割线---】 -> [加载PS] -> [高斯模糊叠加] -> [保存] -> [确认保存]

   - **执行流程**:
     1. 脚本执行分割线前的5个步骤，处理完第一批次的所有图片。
     2. 脚本【自动】点击“下一页”按钮，进入第二个文件夹。
     3. 脚本执行分割线后的4个步骤，处理完第二批次的所有图片。

   【场景二：所有批次使用相同流程】
   如果您的所有批次操作完全一样，那么您的工作流中【不应该】包含“批次分割线”。
   例如： [加载PS] -> [选择MT] -> [输入参数] -> [保存] -> [确认保存]
   - **执行流程**: 脚本会用这一套流程，依次处理完第一批次和第二批次。

   【场景三：临时只想处理一个批次】
   假设您已经配置好了包含“批次分割线”的复杂流程，但这次只想跑第一批次。
   - **正确操作**: 无需修改工作流！只需去“序号配置”页面，把【“第二批次 (可选)”的开关关掉】即可。脚本会自动忽略第二批次的序号和流程。

 =================================
 ==   第四部分：工作流步骤参考  ==
 =================================

   - 【加载PS】: 打开PStouch并点击PS项目。
   - 【选择MT】: 切换到MT管理器并选择素材。
   - 【等待加载】: 强制等待，确保素材加载。
   - 【输入参数】: 输入W/H/X/Y/缩放值。
   - 【应用参数】: 点击“应用”按钮。
   - 【保存】/【确认保存】: 执行保存操作。
   - 【高级设置】: 应用不透明度/混合模式。
   - 【高斯模糊叠加】: 自动执行“复制图层->高斯模糊”的预设效果。
   - 【渐变映射】: 应用“渐变映射”调色效果。
   - 【图层样式】: 点击一个您自定义的坐标点，用于触发固定位置的按钮。

 =================================
 ==   第五部分：注意事项        ==
 =================================

   - 【序号数量】必须严格等于【素材数量】。
   - 【开关】是所有参数生效的前提。
   - 【坐标校准】是首次使用的必须步骤。
   - 【双击】才能启动任务，防止误触。
`
};

// 将信息对象导出，以便其他脚本可以引用
module.exports = scriptInfo;